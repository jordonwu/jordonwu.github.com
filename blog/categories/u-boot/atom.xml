<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: u-boot | Jordon Wu's Blog]]></title>
  <link href="http://jordonwu.github.io/blog/categories/u-boot/atom.xml" rel="self"/>
  <link href="http://jordonwu.github.io/"/>
  <updated>2015-10-09T15:24:01+08:00</updated>
  <id>http://jordonwu.github.io/</id>
  <author>
    <name><![CDATA[Jordon Wu]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[build u-boot for riot board]]></title>
    <link href="http://jordonwu.github.io/blog/2015/04/15/build-u-boot-for-riot-board/"/>
    <updated>2015-04-15T14:52:23+08:00</updated>
    <id>http://jordonwu.github.io/blog/2015/04/15/build-u-boot-for-riot-board</id>
    <content type="html"><![CDATA[<h2>1. Get u-boot source</h2>

<pre><code>git clone https://github.com/Freescale/u-boot-fslc.git
</code></pre>

<h2>2. make &amp; build</h2>

<pre><code>$cd u-boot-fslc
$export ARCH=arm 
$export CROSS_COMPILE=arm-linux-gnueabihf-
$make riotboard_defconfig 
$make
$ls ls -l u-boot.*
    -rw-rw-r-- 1 jordon jordon 331492 Dec  7 05:44 u-boot.bin
    -rw-rw-r-- 1 jordon jordon 334848 Dec  7 05:44 u-boot.imx
    -rw-rw-r-- 1 jordon jordon   1286 Dec  7 05:44 u-boot.lds
    -rw-rw-r-- 1 jordon jordon 317244 Dec  7 05:44 u-boot.map
    -rw-rw-r-- 1 jordon jordon 994618 Dec  7 05:44 u-boot.srec
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[build openwrt firmware]]></title>
    <link href="http://jordonwu.github.io/blog/2015/04/15/build-openwrt-firmware/"/>
    <updated>2015-04-15T14:51:54+08:00</updated>
    <id>http://jordonwu.github.io/blog/2015/04/15/build-openwrt-firmware</id>
    <content type="html"><![CDATA[<h1>1. Hardware</h1>

<p>wrtnode board <a href="http://cn.wrtnode.com/">http://cn.wrtnode.com/</a></p>

<h1>2. Backup firmware</h1>

<h2>1) ssh to wrtnode board</h2>

<pre><code>root@OpenWrt:/tmp# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00030000 00010000 "u-boot"
mtd1: 00010000 00010000 "u-boot-env"
mtd2: 00010000 00010000 "factory"
mtd3: 00fb0000 00010000 "firmware"
mtd4: 00e96447 00010000 "rootfs"
mtd5: 00780000 00010000 "rootfs_data"
</code></pre>

<h2>2) back up u-boot and factory partition to /tmp</h2>

<pre><code>root@OpenWrt:/tmp# dd if=/dev/mtd0 of=/tmp/wrtnode_u-boot.backup
root@OpenWrt:/tmp# dd if=/dev/mtd1 of=/tmp/wrtnode_u-boot-env.backup
root@OpenWrt:/tmp# dd if=/dev/mtd2 of=/tmp/wrtnode_factory.backup
root@OpenWrt:/tmp# cat /proc/mtd &gt; wrtnode_mtd_info.txt
</code></pre>

<h2>3) scp backup firmware to local pc</h2>

<pre><code>$ scp root@192.168.8.1:/tmp/wrtnode_u-boot.backup .
$ scp root@192.168.8.1:/tmp/wrtnode_u-boot-env.backup .
$ scp root@192.168.8.1:/tmp/wrtnode_factory.backup .
$ scp root@192.168.8.1:/tmp/wrtnode_mtd_info.txt .
</code></pre>

<h1>3. Build u-boot</h1>

<h1>4. Build kernel</h1>

<h1>5. Build openwrt image</h1>
]]></content>
  </entry>
  
</feed>
