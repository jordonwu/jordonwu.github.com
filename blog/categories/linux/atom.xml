<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: linux | Jordon Wu's Blog]]></title>
  <link href="http://jordonwu.github.io/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://jordonwu.github.io/"/>
  <updated>2016-05-04T14:22:40+08:00</updated>
  <id>http://jordonwu.github.io/</id>
  <author>
    <name><![CDATA[Jordon Wu]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Buildroot for imx L3.14.52_1.1.0_ga]]></title>
    <link href="http://jordonwu.github.io/blog/2016/04/07/buildroot-for-imx-l3-dot-14-dot-52-1-dot-1-0-ga/"/>
    <updated>2016-04-07T13:04:45+08:00</updated>
    <id>http://jordonwu.github.io/blog/2016/04/07/buildroot-for-imx-l3-dot-14-dot-52-1-dot-1-0-ga</id>
    <content type="html"><![CDATA[<h1>1. Get Buildroot</h1>

<pre><code>$ git clone git://git.buildroot.net/buildroot.git buildroot (commit id: 986fa441e49cc180f77704699a6d2bb3627bf86a)
</code></pre>

<h1>2. Edit config file for imx6qsabresd board</h1>

<pre><code>$ vim configs/freescale_imx6qsabresd_defconfig as below
################################################################################################################
# architecture
BR2_arm=y
BR2_BINFMT_ELF=y
BR2_cortex_a9=y
BR2_ARM_ENABLE_NEON=y
BR2_ARM_ENABLE_VFP=y
BR2_ARM_EABIHF=y
BR2_ARM_FPU_VFPV3D16=y
BR2_ARM_INSTRUCTIONS_ARM=y

#toolchain
BR2_TOOLCHAIN_EXTERNAL=y
BR2_TOOLCHAIN_EXTERNAL_LINARO_ARM=y
BR2_TOOLCHAIN_EXTERNAL_DOWNLOAD=y

#Build Options
BR2_DL_DIR="/opt/buildroot/dl"

# patches
BR2_GLOBAL_PATCH_DIR="board/freescale/imx6sabre/patches"

# Linux headers same as kernel, a 3.14 series
BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_3_14=y

# system
BR2_TARGET_GENERIC_GETTY_PORT="ttymxc0"

# kernel
BR2_LINUX_KERNEL=y
BR2_LINUX_KERNEL_CUSTOM_GIT=y
BR2_LINUX_KERNEL_CUSTOM_REPO_URL="git://git.freescale.com/imx/linux-2.6-imx.git"
BR2_LINUX_KERNEL_CUSTOM_REPO_VERSION="rel_imx_3.14.52_1.1.0_ga"
BR2_LINUX_KERNEL_DEFCONFIG="imx_v7"
#BR2_LINUX_KERNEL_UIMAGE=y
BR2_LINUX_KERNEL_ZIMAGE=y
BR2_LINUX_KERNEL_UIMAGE_LOADADDR="0x10008000"
BR2_LINUX_KERNEL_DTS_SUPPORT=y
BR2_LINUX_KERNEL_INTREE_DTS_NAME="imx6q-sabresd"

# filesystem
#BR2_TARGET_ROOTFS_EXT2=y
BR2_TARGET_ROOTFS_TAR=y
BR2_TARGET_ROOTFS_TAR_BZIP2=y

# bootloader
BR2_TARGET_UBOOT=y
BR2_TARGET_UBOOT_BOARDNAME="mx6qsabresd"
BR2_TARGET_UBOOT_FORMAT_IMX=y
BR2_TARGET_UBOOT_CUSTOM_GIT=y
BR2_TARGET_UBOOT_CUSTOM_REPO_URL="git://git.freescale.com/imx/uboot-imx.git"
BR2_TARGET_UBOOT_CUSTOM_REPO_VERSION="rel_imx_3.14.52_1.1.0_ga"
################################################################################################################
</code></pre>

<h1>3. Build image</h1>

<pre><code>$ make freescale_imx6qsabresd_defconfig
$ make -j 8
$ ls output/images/* -alh
-rw-r--r-- 1 vmuser vmuser  42K Apr  7 13:46 output/images/imx6q-sabresd.dtb
-rw-r--r-- 1 vmuser vmuser 8.3M Apr  7 13:46 output/images/rootfs.ext2
-rw-r--r-- 1 vmuser vmuser 6.7M Apr  7 13:48 output/images/rootfs.tar
-rw-r--r-- 1 vmuser vmuser 2.7M Apr  7 13:48 output/images/rootfs.tar.bz2
-rw-r--r-- 1 vmuser vmuser 403K Apr  7 13:34 output/images/u-boot.imx
-rw-r--r-- 1 vmuser vmuser 5.3M Apr  7 13:46 output/images/zImage
</code></pre>

<h1>4. Config display as HMDI</h1>

<pre><code>1) Enter u-boot console
2) 
=&gt; setenv mmcargs 'setenv bootargs console=${console},${baudrate} ${smp} root=${mmcroot} rootwait rw video=mxcfb0:dev=hdmi,1920x1080M@60,if=RGB24'
=&gt; saveenv
</code></pre>

<h1>5. Config display as single LVDS</h1>

<h1>6. Config display as dual LVDS</h1>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[kindle 3 hack]]></title>
    <link href="http://jordonwu.github.io/blog/2016/01/26/kindle-3-hack/"/>
    <updated>2016-01-26T21:23:32+08:00</updated>
    <id>http://jordonwu.github.io/blog/2016/01/26/kindle-3-hack</id>
    <content type="html"><![CDATA[<h1>1. Prepare</h1>

<h2>1.1 Open kindle 3 case and solder rs232 as below</h2>

<p><img src="../images/kindle3-rs232.jpg" title="Kindle 3 rs232" alt="Kindle 3 rs232" /></p>

<h2>1.2 User name and password</h2>

<pre><code>login user = framework 
password = mario 
</code></pre>

<h1>2. Bootloader</h1>

<h2>2.1 Original u-boot info</h2>

<pre><code>U-Boot 1.3.0-rc3-lab126 (Dec 27 2010 - 17:42:23)

CPU:   Freescale i.MX35 at 532 MHz
Board: MX35 Luigi [ WDT]
WDOG_WCR = 0xff31
WDOG_WMCR = 0x0
Board Id: SP1B000000000000
S/N: B008000000000000
DRAM:  256 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
No ethernet found.
i.MX35 CPU board version 2.0
Net:   No ethernet found.
Hit any key to stop autoboot:  0 
uboot&gt; 
uboot&gt; 
uboot&gt; printenv
bootdelay=1
baudrate=115200
loadaddr=0x80800000
uboot_net=tftpboot 0x84000000 u-boot.bin
uboot_serial=loady 0x84000000
uboot_ram=go 0x84000000
bootargs_diag=setenv bootargs tests=all
diags_net=tftpboot 0x84000000 diagmon.uimage; run bootargs_diag; bootm 0x84000000
diags_serial=loady 0x84000000; run bootargs_diag; bootm 0x84000000
bootargs_base=console=ttymxc0,115200 mem=256M panic=10
bootcmd_root_nfs=setenv bootargs $(bootargs_base) root=/dev/nfs rw nfsroot=$(nfsrootfs),v3,tcp rw ip=$(ipaddr):$(serverip):$(serverip):$(netmask):mario1 rootdelay=3
bootcmd_root_mmc=setenv bootargs $(bootargs_base) root=/dev/mmcblk1p1 rw ip=none
bootcmd_root_mvn=setenv bootargs $(bootargs_base) root=/dev/mmcblk0p1 rw ip=none
bootcmd_kernel_nfs=nfs 0x87f40400 $(nfsrootfs)/uImage; bootm
bootcmd_kernel_tftp=tftp 0x87f40400 uImage; bootm
bootcmd_nfs=run bootcmd_root_nfs; run bootcmd_kernel_nfs
bootcmd_flash=run bootcmd_root_mvn; run bootcmd_kernel_nor
bootcmd_card=run bootcmd_root_mmc; run bootcmd_kernel_nor
bootcmd_recovery=run bootcmd_root_recovery; run bootcmd_kernel_nor
bootcmd_defaultflash=setenv bootargs; run bootcmd_kernel_nor
bootcmd=bootm 0x87f40400
testmem=mtest 0x80000000 0x86ffffff
nfsrootfs=/nfsboot
ethaddr=00:22:33:44:55:66
cfgreset=protect off all ; erase (0xA0000000 + (128 * 1024)) +(128 * 1024)
bootretry=-1
stdin=serial
stdout=serial
stderr=serial

Environment size: 1362/131068 bytes
uboot&gt; bdinfo
arch_number = 0x0000066D
env_t       = 0x00000000
boot_params = 0x80000100
DRAM bank   = 0x00000000
-&gt; start    = 0x80000000
-&gt; size     = 0x10000000
ethaddr     = 00:22:33:44:55:66
ip_addr     = 0.0.0.0
baudrate    = 115200 bps
uboot&gt; help
?       - alias for 'help'
autoscr - run script from memory
base    - print or set address offset
bdinfo  - print Board Info structure
boot    - boot default, i.e., run 'bootcmd'
bootd   - boot default, i.e., run 'bootcmd'
bootm   - boot application image from memory
bootp   - boot image via network using BootP/TFTP protocol
cmp     - memory compare
coninfo - print console devices and information
cp      - memory copy
crc32   - checksum calculation
dhcp    - invoke DHCP client to obtain IP/boot params
echo    - echo args to console
go      - start application at address 'addr'
help    - print online help
iminfo  - print header information for application image
itest   - return true/false on integer compare
loadb   - load binary file over serial line (kermit mode)
loads   - load S-Record file over serial line
loady   - load binary file over serial line (ymodem mode)
loop    - infinite loop on address range
md      - memory display
mii     - MII utility commands
mm      - memory modify (auto-incrementing)
mtest   - simple RAM test
mw      - memory write (fill)
nfs     - boot image via network using NFS protocol
nm      - memory modify (constant address)
ping    - send ICMP ECHO_REQUEST to network host
printenv- print environment variables
rarpboot- boot image via network using RARP/TFTP protocol
reset   - Perform RESET of the CPU
run     - run commands in an environment variable
setenv  - set environment variables
sleep   - delay execution for some time
tftpboot- boot image via network using TFTP protocol
version - print monitor version
uboot&gt; version

U-Boot 1.3.0-rc3-lab126 (Dec 27 2010 - 17:42:23)
uboot&gt; 
</code></pre>

<h1>3. Kernel</h1>

<h2>3.1 Original kernel info</h2>

<pre><code>uboot&gt; reset


U-Boot 1.3.0-rc3-lab126 (Dec 27 2010 - 17:42:23)

CPU:   Freescale i.MX35 at 532 MHz
Board: MX35 Luigi [ WDT]
WDOG_WCR = 0xff31
WDOG_WMCR = 0x0
Board Id: SP1B000000000000
S/N: B008000000000000
DRAM:  256 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
No ethernet found.
i.MX35 CPU board version 2.0
Net:   No ethernet found.
Hit any key to stop autoboot:  0 
## Booting image at 87f40400 ...
   Image Name:   Linux-2.6.26-rt-lab126
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    2166568 Bytes =  2.1 MB
   Load Address: 80008000
   Entry Point:  80008000
   Verifying Checksum ... OK
   Loading Kernel Image ... OK

Starting kernel ...

Uncompressing Linux.......................................................................................................................... done, booting the kernel.
boot: C def:bcut:batterycut=1:
2.6.26-rt-lab126 #5 Sat Feb 5 19:05:05 PST 2011 armv6l
INFO:Using default keypad setting. (not passing "kb_rev" to module)
INFO:Loaded module /lib/modules/mxc_keyb.ko  (22508 bytes)
Press [ENTER] for recovery menu...       0 /INFO:Partition table verified for /dev/mmcblk0
INFO:Checking for updates... (auto-pilot mode)
/dev/mmcblk0p4:
CHS=4/16/100167 size=3282272256 bytes
flag type      first       last  lba first   lba size
Partition p1:
0x00 0x0b         16 &lt;large&gt;            16    6410672
    CHS: 0/1/1 - &lt;large&gt;
Partition p2:
Partition p3:
Partition p4:
INFO:Setup loop device /dev/loop0 for /dev/mmcblk0p4 + 8192
INFO:No update*.bin found; no update needed.
INFO:no updates found.
BOOTING DEFAULT.
  argc == 9
  argv[0]: "kinit"
  argv[1]: "console=ttymxc0,115200"
  argv[2]: "mem=256M"
  argv[3]: "panic=10"
  argv[4]: "root=/dev/mmcblk0p1"
  argv[5]: "ro"
  argv[6]: "ip=none"
  argv[7]: "quiet"
  argv[8]: "lpj=2555904"
Running ipconfig
  argc == 4
  argv[0]: "IP-Config"
  argv[1]: "-i"
  argv[2]: "Linux kinit"
  argv[3]: "ip=none"
IP-Config: no devices to configure
kinit: do_mounts
kinit: name_to_dev_t(/dev/mmcblk0p1) = dev(179,1)
kinit: root_dev = dev(179,1)
kinit: /dev/root appears to be a ext3 filesystem
kinit: trying to mount /dev/root on /root with type ext3
kinit: Mounted root (ext3 filesystem) readonly.
Checking for init: /sbin/init
Checking for init: /bin/init
Checking for init: /etc/init
Checking for init: /sbin/init.sysvinit
INIT: version 2.86 booting
system: I rcS:def:starting /etc/rcS.d/S02kdb
system: I S02kdb:def:Setting boot device to mmcblk0
kdb set: 'system/driver/filesystem/DEV_ROOT'
system: I rcS:def:starting /etc/rcS.d/S03udev
system: I S03udev:def:setting up virtual fs for hotplug event handling
system: I S03udev:def:starting the hotplug events dispatcher
system: I S03udev:def:synthesizing initial hotplug events
lipc-send-event[380]: E lipc:con::Connection error(Failed to connect to socket /var/run/dbus/system_bus_socket: No such file or directory)
lipc-send-event[380]: C def:dbusi::Failed to init dbus
lipc-send-event[380]: E def:open::Failed to open LIPC
lipc-send-event[380]: E def:fail:source=com.lab126.hal, event=usbPlugIn:Sending event failed
lipc-send-event[481]: E lipc:con::Connection error(Failed to connect to socket /var/run/dbus/system_bus_socket: No such file or directory)
lipc-send-event[481]: C def:dbusi::Failed to init dbus
lipc-send-event[481]: E def:open::Failed to open LIPC
lipc-send-event[481]: E def:fail:source=com.lab126.hal, event=audioHS:Sending event failed
system: I rcS:def:starting /etc/rcS.d/S04rootfsresize
system: I S04rootfsresize:def:No rootfs on /dev/mmcblk0p1 resizing needed
system: I rcS:def:starting /etc/rcS.d/S10filesystems
system: I rcS:def:starting /etc/rcS.d/S10hostname
system: I rcS:def:starting /etc/rcS.d/S10network
system: I S10filesystems:def:mounting filesystems
system: I S10hostname:def:setting device hostname
system: I S10network:def:initializing network configuration
system: I S10network:def:Installed Firewall
system: I rcS:def:starting /etc/rcS.d/S11chpriority
system: I rcS:def:starting /etc/rcS.d/S11video
Unknown HZ value! (85) Assume 100.
system: W S11chpriority:def:Cannot set priority for IRQ-7
system: I S11video:def:initializing eInk HAL for system use
system: I S11video:def:eink_debug=0
system: I S11video:def:Controller set to broads
system: I rcS:def:starting /etc/rcS.d/S20syslog-ng
system: I S20syslog-ng:def:starting syslog-ng
system: I rcS:def:starting /etc/rcS.d/S21init_time
system: I S21init_time:initboot:time=17100:boot time after init in milliseconds
system: I rcS:def:starting /etc/rcS.d/S45modules
system: I S45modules:def:loading module mwan
system: I S45modules:def:loading module g_file_storage
system: I S45modules:def:loading module fuse
system: I S45modules:def:loading module uinput
system: I S45modules:def:loading module mxc_keyb
system: I S45modules:def:loading module fiveway
system: I S45modules:def:loading module volume
system: I rcS:def:starting /etc/rcS.d/S50system
mount: mount point /proc/bus/usb does not exist
Sat Jul 31 00:00:00 UTC 2010
system: I rcS:def:starting /etc/rcS.d/S55scroll
system: I S55scroll:def:skipping; no luigi-based work to do here
system: I rcS:def:starting /etc/rcS.d/S70ethernet
system: I rcS:def:starting /etc/rcS.d/S70userstore
system: I S70ethernet:def:not enet
system: I S70ethernet:def:not usbnet
system: I S70userstore:def:Found BOOTUP flag file
dosfsck 2.11-lab126 (1 Jun 2007)
dosfsck 2.11-lab126, 1 Jun 2007, FAT32, LFN
Checking we can access the last sector of the filesystem
Boot sector contents:
System ID "MSDOS5.0"
Media byte 0xf8 (hard disk)
       512 bytes per logical sector
      8192 bytes per cluster
      1938 reserved sectors
First FAT starts at byte 992256 (sector 1938)
         2 FATs, 32 bit entries
   1601024 bytes per FAT (= 3127 sectors)
Root directory start at cluster 2 (arbitrary size)
Data area starts at byte 4194304 (sector 8192)
    400155 data clusters (3278069760 bytes)
63 sectors/track, 255 heads
        16 hidden sectors
   6410672 sectors total
Checking for unused clusters.
Checking free cluster summary.
/dev/loop/0: 838 files, 33538/400155 clusters
system: I rcS:def:starting /etc/rcS.d/S90video
system: I S90video:def:initializing eInk HAL for rootfs use
INIT: Entering runlevel: 2
system: I lifeguard:def:starting eInk HAL lifeguard
system: I S40diags:def:not starting Diagnostic Services
system: I S40diags:def:/test/diags/factory does not exist
system: I S50battcheck:def:running
Sat Jul 31 08:00:05 2010  INFO:battery voltage: 3708 mV
Sat Jul 31 08:00:05 2010  INFO:battery charge: 40%
system: I S50battcheck:def:current voltage = 3703mV
Sat Jul 31 08:00:05 2010  INFO:battery charge: 40%
Sat Jul 31 08:00:05 2010  INFO:battery voltage: 3708 mV
Sat Jul 31 08:00:05 2010  INFO:battery current: -235 mA
system: I S50battcheck:def:gasgauge capacity=40% volts=3708 mV current=-235 mA
system: I S50battcheck:def:Waiting for 3460mV or 4%
system: I S50battcheck:def:battery sufficient, booting to normal runlevel
INIT: Switching to runlevel: 5
INIT: Sending processes the TERM signal
system: I wifi:def:WiFi Device mac = 28:EF:01:4B:F1:55
Platform set to SHASTA_NATIVEMMC-SDIO
Platform Setup Script is: /opt/ar6k/host/support/platformscripts/plat_SHASTA_NATIVEMMC-SDIO.sh
Image path: /sbin
No debug record limit set
Load Board Data from /opt/ar6k/target/AR6002/hw2.0/bin/lab126_15dBm_nodiv_WWR_CTL.bin
Updating MAC address
BMI Set App Start (address: 0x913950)
BMI Bit-Wise (OR) modify Register (address: 0x500410, orig:0x8, new: 0x9,  mask:0x1)
BMI Write compressed Memory (address: 0x502070, filename: /opt/ar6k/target/AR6002/hw2.0/bin/athwlan.bin.z77)
BMI Write Memory (address: 0x52d6d0, filename: /opt/ar6k/target/AR6002/hw2.0/bin/data.patch.hw2_0.bin)
BMI Write Memory (address: 0x500418, value: 0x52d6d0)
BMI Done
system: I wifi:def:loadAR6000 finished, args=()
system: I wpa_supplicant:def:wpa supplicant started
system: I S30network:def:initializing network configuration
system: I S30network:def:Installed Firewall
system: I S60dbus:def:starting system message bus
system: W S64linkjail:def:couldn't run unlinkjail
Starting Process Monitoring Daemon: Retrieved 127 keys for system/daemon/pmond/
Starting Power Management Daemon: system: I S70cmd:def:starting CMD daemon
system: I S70wifid:def:starting wifid
system: I S75phd:def:Starting Phone-Home Daemon
system: I S76mcsd:def:starting MCS server
DK_update starts on Sat Jul 31 08:00:14 AMZ 2010
clean_repair
system: I volumd:def:starting Volume daemon
find DIAGNOSTIC.log
file 360 KB, limit 5000 KB
do not compress it
update_duokan
custom_debug
DK_update ends on Sat Jul 31 08:00:14 AMZ 2010
system: I S80volumd:def:starting Volume daemon
system: I S82usbnet:def:usbnet is disabled
system: I S85audio:def:initializing audio driver defaults
No state is present for card mx35luigi
system: I S85audio:def:starting audio server
system: I S87ttsd:def:starting TTS daemon
Battery Level: 40%
Sat Jul 31 08:00:17 2010  INFO:battery charge: 40%
system: I S90cron:def:starting crond
system: I S90tmd:def:Starting Transfer Manager Daemon
Starting lipc-daemon: system: I S94browserd:def:Starting Browser Daemon
Show menu
system: I S95framework:def:starting booklet framework
Run Prog
open successfully:/dev/input/event0
open successfully:/dev/input/event1
open successfully:/dev/input/event2
system: I S95framework:def:logging reset type: hard
start.sh: starting framework

DuoKan 2012 System
Run DuoKan program
KINDLE_VERSION BASE = 300
stop_tmd_v3v4
system: I S96boot_finished:def:Boot finished script running
system: I S96boot_finished:symboot:time=45560:boot time before framework starts, in milliseconds
system: I browserd:def:Stopping Browser Daemon
Killed
system: I updater:def:updater started
system: W updater:def:Update file not found. Not updating
system: I phd:def:Stopping Phone-Home Daemon
system: I ttsd:def:stopping TTS daemon
com.lab126.powerd failed to set value for property wakeUp (0x8 lipcErrNoSuchProperty)
get_power: battery_capacity 40% 
KINDLE_VERSION BASE = 300
system: I wifid:def:stopping wifid
stop_framework
system: I framework:def:stopping booklet framework
system: I start.sh:stop:signal=15,exitval=143:CVM stopped using SIGTERM
Unknown HZ value! (85) Assume 100.
Unknown HZ value! (85) Assume 100.
[DKLogger] - No LoggerCfg.ini found in working directory!
07-31 08:00:37:187-&lt;TID: 109667836&gt; DIAGNOSTIC: GetDeviceType(B008)
07-31 08:00:37:200-&lt;TID: 109667836&gt; DIAGNOSTIC: Diagnostic, kindle version(xKindle_2013-10-25.30919.rtm), device type: (5), kernel version:(2.6.2.30412)
07-31 08:00:37:209-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from shell begin: free
Unknown HZ value! (79) Assume 100.
07-31 08:00:37:233-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from shell end: free
07-31 08:00:37:235-&lt;TID: 109667836&gt; DIAGNOSTIC: free space:
             total       used       free     shared    buffers     cached
Mem:        256536      69624     186912          0      12060      37840
-/+ buffers/cache:      19724     236812
Swap:            0          0          0

07-31 08:00:37:236-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from shell begin: top -b -n1
Unknown HZ value! (79) Assume 100.
07-31 08:00:37:903-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from shell end: top -b -n1
07-31 08:00:37:907-&lt;TID: 109667836&gt; DIAGNOSTIC: 
top - 08:00:37 up 0 min,  0 users,  load average: 1.85, 0.52, 0.18
Tasks:  61 total,   1 running,  60 sleeping,   0 stopped,   0 zombie
Cpu(s): 22.2%us, 43.8%sy,  0.0%ni, 13.5%id, 19.3%wa,  0.7%hi,  0.4%si,  0.0%st
Mem:    256536k total,    69984k used,   186552k free,    12076k buffers
Swap:        0k total,        0k used,        0k free,    38052k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND            
 3713 root      20   0  2380 1048  824 R  1.9  0.4   0:00.06 top                
    1 root      20   0  1484  536  472 S  0.0  0.2   0:01.69 init.sysvinit      
    2 root      15  -5     0    0    0 S  0.0  0.0   0:00.01 kthreadd           
    3 root      RT  -5     0    0    0 S  0.0  0.0   0:00.00 posixcputmr/0      
    4 root     -51  -5     0    0    0 S  0.0  0.0   0:00.00 sirq-high/0        
    5 root     -51  -5     0    0    0 S  0.0  0.0   0:00.00 sirq-timer/0       
    6 root     -51  -5     0    0    0 S  0.0  0.0   0:00.00 sirq-net-tx/0      
    7 root     -51  -5     0    0    0 S  0.0  0.0   0:00.00 sirq-net-rx/0      
    8 root     -51  -5     0    0    0 S  0.0  0.0   0:00.00 sirq-block/0       
    9 root     -51  -5     0    0    0 S  0.0  0.0   0:00.00 sirq-tasklet/0     
   10 root     -51  -5     0    0    0 S  0.0  0.0   0:00.00 sirq-sched/0       
   11 root     -51  -5     0    0    0 S  0.0  0.0   0:00.00 sirq-hrtimer/0     
   12 root     -51  -5     0    0    0 S  0.0  0.0   0:00.00 sirq-rcu/0         
   13 root      10 -10     0    0    0 S  0.0  0.0   0:00.07 desched/0          
   14 root      -2  -5     0    0    0 S  0.0  0.0   0:00.14 events/0           
   15 root      15  -5     0    0    0 S  0.0  0.0   0:00.03 khelper            
   67 root      15  -5     0    0    0 S  0.0  0.0   0:00.07 kblockd/0          
   72 root      15  -5     0    0    0 S  0.0  0.0   0:00.01 mxc_spi.0          
   75 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 mxc_spi.1          
   94 root      15  -5     0    0    0 S  0.0  0.0   0:00.32 kmmcd              
  102 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 pmic_spi/0         
  174 root      20   0     0    0    0 S  0.0  0.0   0:00.00 pdflush            
  175 root      20   0     0    0    0 S  0.0  0.0   0:00.00 pdflush            
  176 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 kswapd0            
  177 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 aio/0              
  178 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 nfsiod             
  214 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 kondemand/0        
  225 root      15  -5     0    0    0 S  0.0  0.0   0:01.44 mmcqd              
  256 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 rpciod/0           
  271 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 kjournald          
  373 root      16  -4  1520  540  372 S  0.0  0.2   0:00.32 udevd              
  641 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 kjournald          
  888 root      15  -5     0    0    0 S  0.0  0.0   0:00.71 eink_fb_bt         
  890 root      15  -5     0    0    0 S  0.0  0.0   0:00.06 eink_fb_pt         
  966 root      20   0  1948  660  468 S  0.0  0.3   0:00.21 syslog-ng          
 1086 root       0 -20     0    0    0 S  0.0  0.0   0:00.00 file-storage-ga    
 1374 root       0 -20     0    0    0 S  0.0  0.0   0:00.23 loop0              
 1410 root      20   0 61328 1104  492 S  0.0  0.4   0:00.55 fsp                
 1489 root      20   0  2656  732  568 S  0.0  0.3   0:00.04 lifeguard          
 1536 root      20   0  2656  364  200 S  0.0  0.1   0:00.01 lifeguard          
 1696 root      20   0  2656  752  584 S  0.0  0.3   0:00.11 rc                 
 1969 root      20   0  1840  824  400 S  0.0  0.3   0:00.15 recEvent           
 1971 root      15  -5     0    0    0 S  0.0  0.0   0:00.18 AR6K Async         
 1994 root      -2  -5     0    0    0 S  0.0  0.0   0:00.01 ksdiorqd           
 2020 root      20   0  3448 1600 1276 S  0.0  0.6   0:00.06 wpa_supplicant     
 2210 messageb  20   0  2236  812  588 S  0.0  0.3   0:00.21 dbus-daemon        
 2303 root      20   0 19608 1100  868 S  0.0  0.4   0:00.04 pmond              
 2353 root      20   0 19680 1420 1212 S  0.0  0.6   0:00.07 powerd             
 2479 root      20   0 36032 1432 1188 S  0.0  0.6   0:00.08 cmd                
 2660 root      20   0 35784 1084  916 S  0.0  0.4   0:00.03 mcsd               
 2723 root      20   0 19600 1288 1100 S  0.0  0.5   0:00.06 volumd             
 2938 root      20   0 41792 4220 3580 S  0.0  1.6   0:00.31 audioServer        
 3124 root      20   0  2652  552  464 S  0.0  0.2   0:00.00 crond              
 3129 root      20   0 38936 2660 2240 S  0.0  1.0   0:00.09 tmd                
 3130 root      20   0 19324 1028  872 S  0.0  0.4   0:00.01 lipc-daemon        
 3400 root      20   0  2656  456  288 S  0.0  0.2   0:00.02 rc                 
 3419 root      20   0  2656  744  596 S  0.0  0.3   0:00.03 sh                 
 3470 root      20   0  2656  356  188 S  0.0  0.1   0:00.00 S96boot_finishe    
 3471 root      20   0 19316 1060  920 S  0.0  0.4   0:00.01 lipc-wait-event    
 3695 root      20   0 29340  12m 8096 S  0.0  4.9   0:00.61 KindleApp          
 3712 root      20   0  2652  548  472 S  0.0  0.2   0:00.01 sh                 



killall: mplayer: no process killed
07-31 08:00:38:318-&lt;TID: 109667836&gt; DIAGNOSTIC: Begin execute command: sysctl vm.overcommit_memory=1
Unknown HZ value! (79) Assume 100.
vm.overcommit_memory = 1
07-31 08:00:38:342-&lt;TID: 109667836&gt; DIAGNOSTIC: End execute command: sysctl vm.overcommit_memory=1
07-31 08:00:38:389-&lt;TID: 109667836&gt; DIAGNOSTIC: m_testLowAlarm : 0
07-31 08:00:38:391-&lt;TID: 109667836&gt; DIAGNOSTIC: DKPowerManagerImpl::UpdatePowerLevel init power=40, voltage=3713, mAH=643
07-31 08:00:38:393-&lt;TID: 109667836&gt; DIAGNOSTIC: DKPowerManagerImpl::StartPowerdMonitor()
07-31 08:00:38:398-&lt;TID: 109667836&gt; DIAGNOSTIC: DKPowerManagerImpl::StartWaitEvent()
07-31 08:00:38:400-&lt;TID: 109671336&gt; DIAGNOSTIC: Read string from shell begin: lipc-wait-event  -s 60 com.lab126.powerd outOfScreenSaver,goingToScreenSaver,userShutdown,outOfShutdown,charging,notCharging,battLevelChanged 2&gt;&gt;/mnt/us/DK_System/xKindle/powerError.log
07-31 08:00:38:438-&lt;TID: 111349057&gt; DIAGNOSTIC: sigwaitinfo() begin wait sig
07-31 08:00:38:448-&lt;TID: 109667836&gt; DIAGNOSTIC: Initialize BookStore Managers
07-31 08:00:38:848-&lt;TID: 111495694&gt; DIAGNOSTIC: CStartProgress::ProgressThread (0, 80)
07-31 08:00:38:867-&lt;TID: 109667836&gt; DIAGNOSTIC: DKPowerManagerImpl::AccquireLock, lock(0),src=9,m_lockNum=0
07-31 08:00:38:869-&lt;TID: 109667836&gt; DIAGNOSTIC: DKPowerManagerImpl::AccquireLock:preventScreenSaver 1
07-31 08:00:38:938-&lt;TID: 113173416&gt; DIAGNOSTIC: DKPowerManagerImpl::ReleaseLock, lock(0),src=9,m_lockNum=1
07-31 08:00:38:939-&lt;TID: 113173416&gt; DIAGNOSTIC: DKPowerManagerImpl::ReleaseLock, preventScreenSaver 0
07-31 08:00:38:993-&lt;TID: 109667836&gt; DIAGNOSTIC: Begin Init Keyboard


07-31 08:00:47:843-&lt;TID: 109667836&gt; DIAGNOSTIC: SetScreenSaverStatus:0
07-31 08:00:47:854-&lt;TID: 109667836&gt; DIAGNOSTIC: Begin Create FileManager
07-31 08:00:47:856-&lt;TID: 109667836&gt; DIAGNOSTIC: Begin LoadFileToFileManger
07-31 08:00:48:224-&lt;TID: 109667836&gt; DIAGNOSTIC: Main cost 1 seconds to scan all 25 files
07-31 08:00:48:225-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from shell begin: free
Unknown HZ value! (80) Assume 100.
07-31 08:00:48:253-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from shell end: free
07-31 08:00:48:255-&lt;TID: 109667836&gt; DIAGNOSTIC: free space:
             total       used       free     shared    buffers     cached
Mem:        256536     135400     121136          0      24824      72604
-/+ buffers/cache:      37972     218564
Swap:            0          0          0

07-31 08:00:48:302-&lt;TID: 115133352&gt; DIAGNOSTIC: DKPowerManagerImpl::AccquireLock, lock(0),src=2,m_lockNum=0
07-31 08:00:48:303-&lt;TID: 115133352&gt; DIAGNOSTIC: DKPowerManagerImpl::AccquireLock:preventScreenSaver 1
07-31 08:00:48:364-&lt;TID: 111495694&gt; DIAGNOSTIC: CStartProgress::ProgressThread over!
07-31 08:00:48:382-&lt;TID: 115133352&gt; DIAGNOSTIC: DKPowerManagerImpl::ReleaseLock, lock(0),src=2,m_lockNum=1
07-31 08:00:48:385-&lt;TID: 115133352&gt; DIAGNOSTIC: DKPowerManagerImpl::ReleaseLock, preventScreenSaver 0
07-31 08:00:49:513-&lt;TID: 109667836&gt; DIAGNOSTIC: m_testLowAlarm : 0
07-31 08:00:49:515-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from file begin: /sys/devices/platform/fsl-usb2-udc/charging
07-31 08:00:49:517-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from file end: /sys/devices/platform/fsl-usb2-udc/charging
07-31 08:00:50:798-&lt;TID: 109667836&gt; DIAGNOSTIC: Begin Create main thread
07-31 08:00:50:817-&lt;TID: 109667836&gt; DIAGNOSTIC: Start wait usb
07-31 08:00:50:969-&lt;TID: 109667836&gt; DIAGNOSTIC: Back to home
07-31 08:00:50:978-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from shell begin: free
Unknown HZ value! (80) Assume 100.
07-31 08:00:51:069-&lt;TID: 109667836&gt; DIAGNOSTIC: Read string from shell end: free
07-31 08:00:51:071-&lt;TID: 109667836&gt; DIAGNOSTIC: free space:
             total       used       free     shared    buffers     cached
Mem:        256536     143480     113056          0      24940      73720
-/+ buffers/cache:      44820     211716
Swap:            0          0          0



ls
pwd
</code></pre>

<h1>4. Rootfs</h1>

<h1>5. GUI</h1>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[imx6 summary linux host environment setup]]></title>
    <link href="http://jordonwu.github.io/blog/2015/05/26/imx6-summary-linux-host-environment-setup/"/>
    <updated>2015-05-26T08:52:12+08:00</updated>
    <id>http://jordonwu.github.io/blog/2015/05/26/imx6-summary-linux-host-environment-setup</id>
    <content type="html"><![CDATA[<h1>1.  Install Host OS</h1>

<h2>1.1 Install VMware</h2>

<pre><code>Version: VMware10.03
</code></pre>

<h2>1.2 Install ubuntu server on VMware</h2>

<pre><code>Version: ubuntu-14.04.2-server-amd64
</code></pre>

<h2>1.3 Update Sources</h2>

<pre><code>$sudo apt-get update
</code></pre>

<h1>2.  Install Host OS Service</h1>

<h2>2.1 Install ssh service</h2>

<pre><code>$ sudo apt-get install openssh-client openssh-server
</code></pre>

<h2>2.2 Install samba service</h2>

<pre><code>$ sudo apt-get install samba

$ sudo vim /etc/samba/smb.conf and add below section to the file end

[home]
comment = samba share path /home
browseable = yes
writeable = yes
path = /home
valid users = smb

$ sudo useradd smb          //add user smb

$ sudo smbpasswd -a smb     //set password for smb user

$ /etc/init.d/smbd restart  //restart smbd service
</code></pre>

<h1>3.  Install Host OS build essential</h1>

<pre><code>$ sudo apt-get install gawk wget git-core diffstat unzip texinfo gcc-multilib \
    build-essential chrpath socat libsdl1.2-dev xterm curl tcl rpm bison m4 \
    zlib1g zlib1g-dev libncurses5-dev liblzo2-dev uuid-dev lzop texi2html texinfo \
    texlive gettext libgtk2.0-dev rpm bison m4 libfreetype6-dev libdbus-glib-1-dev \
    liborbit2-dev intltool ccache libtool uuid-dev liblzo2-dev tcl dpkg asciidoc \
    texlive-latex-base dblatex xutils-dev texlive texinfo lib32z1 lib32ncurses5 \
    lib32bz2-1.0 libc6-dev-i386 u-boot-tools scrollkeeper dos2unix
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[build linux for imx6]]></title>
    <link href="http://jordonwu.github.io/blog/2015/04/16/build-linux-for-imx6/"/>
    <updated>2015-04-16T19:26:06+08:00</updated>
    <id>http://jordonwu.github.io/blog/2015/04/16/build-linux-for-imx6</id>
    <content type="html"><![CDATA[<h1>1.      Install Host OS</h1>

<h2>1.1     Install VMware</h2>

<pre><code>Version: VMware10.03
</code></pre>

<h2>1.2     Install ubuntu server on VMware</h2>

<pre><code>Version: ubuntu-14.04.2-server-amd64
</code></pre>

<h2>1.3     Update Sources</h2>

<pre><code>$sudo apt-get update
</code></pre>

<h1>2.      Install Host OS Service</h1>

<h2>2.1     Install ssh service</h2>

<pre><code>$ sudo apt-get install openssh-client openssh-server
</code></pre>

<h2>2.2     Install samba service</h2>

<pre><code>$ sudo apt-get install samba

$ sudo vim /etc/samba/smb.conf and add below section to the file end

[home]
comment = samba share path /home
browseable = yes
writeable = yes
path = /home
valid users = smb

$ sudo useradd smb          //add user smb

$ sudo smbpasswd -a smb     //set password for smb user

$ /etc/init.d/smbd restart  //restart smbd service
</code></pre>

<h1>3.      Install Host OS build essential</h1>

<pre><code>$ sudo apt-get install gawk wget git-core diffstat unzip texinfo gcc-multilib \
    build-essential chrpath socat libsdl1.2-dev xterm curl tcl rpm bison m4 \
    zlib1g zlib1g-dev libncurses5-dev liblzo2-dev uuid-dev lzop texi2html texinfo \
    texlive gettext libgtk2.0-dev rpm bison m4 libfreetype6-dev libdbus-glib-1-dev \
    liborbit2-dev intltool ccache libtool uuid-dev liblzo2-dev tcl dpkg asciidoc \
    texlive-latex-base dblatex xutils-dev texlive texinfo lib32z1 lib32ncurses5 \
    lib32bz2-1.0 libc6-dev-i386 u-boot-tools scrollkeeper dos2unix
</code></pre>

<h1>4.      Build image for imx6 using yocto</h1>

<h2>4.1     Install repo</h2>

<pre><code>$ curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo

$ export PATH=$PATH:/home/vmuser/bin

$ git config --global user.email "user name@email.com"

$ git config --global user.name "User Name" 
</code></pre>

<h2>4.2     Download freescale community bsp source code</h2>

<pre><code>$ mkdir fsl-community-bsp
$ cd fsl-community-bsp
$ repo init -u https://github.com/Freescale/fsl-community-bsp-platform -b dora
$ repo sync
</code></pre>

<h2>4.3     Change branch and sync</h2>

<pre><code>$ cd fsl-community-bsp
$ repo init -b master   //master or other branch
$ repo sync
</code></pre>

<h2>4.4     First build</h2>

<h3>4.4.1   Sync source code and setup environment</h3>

<pre><code>$ cd fsl-community-bsp
$ repo sync
$ source setup-environment build
$ ls
conf
</code></pre>

<h3>4.4.2   Choose your board</h3>

<pre><code>$ cd fsl-community-bsp

$ cd build

$ vim conf/local.conf #you can change MACHINE

MACHINE ??= 'imx6qsabresd'
DISTRO ?= 'poky'
PACKAGE_CLASSES ?= "package_rpm"
EXTRA_IMAGE_FEATURES = "debug-tweaks"
USER_CLASSES ?= "buildstats image-mklibs image-prelink"
PATCHRESOLVE = "noop"
BB_DISKMON_DIRS = "\
    STOPTASKS,${TMPDIR},1G,100K \
    STOPTASKS,${DL_DIR},1G,100K \
    STOPTASKS,${SSTATE_DIR},1G,100K \
    ABORT,${TMPDIR},100M,1K \
    ABORT,${DL_DIR},100M,1K \
    ABORT,${SSTATE_DIR},100M,1K"
CONF_VERSION = "1"

BB_NUMBER_THREADS = '1'
PARALLEL_MAKE = '-j 1'

DL_DIR ?= "${BSPDIR}/downloads/"
ACCEPT_FSL_EULA = "1"


//list all freescale boards conf
$ ls ../sources/meta-fsl-arm/conf/machine/*.conf -l
    -rw-rw-r-- 1 vmuser vmuser  539 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx23evk.conf
    -rw-rw-r-- 1 vmuser vmuser 2440 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx28evk.conf
    -rw-rw-r-- 1 vmuser vmuser  667 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx31pdk.conf
    -rw-rw-r-- 1 vmuser vmuser  603 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx35pdk.conf
    -rw-rw-r-- 1 vmuser vmuser  333 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx51evk.conf
    -rw-rw-r-- 1 vmuser vmuser  469 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx53ard.conf
    -rw-rw-r-- 1 vmuser vmuser  460 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx53qsb.conf
    -rw-rw-r-- 1 vmuser vmuser  638 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx6dlsabreauto.conf
    -rw-rw-r-- 1 vmuser vmuser  393 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx6dlsabresd.conf
    -rw-rw-r-- 1 vmuser vmuser  533 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx6qsabreauto.conf
    -rw-rw-r-- 1 vmuser vmuser  432 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx6qsabresd.conf
    -rw-rw-r-- 1 vmuser vmuser  432 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx6slevk.conf
    -rw-rw-r-- 1 vmuser vmuser  615 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx6solosabreauto.conf
    -rw-rw-r-- 1 vmuser vmuser  468 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/imx6solosabresd.conf
    -rw-rw-r-- 1 vmuser vmuser  542 Apr 16 23:58 ../sources/meta-fsl-arm/conf/machine/twr-vf65gs10.conf

//list all non-freescale boards conf
$ ls ../sources/meta-fsl-arm-extra/conf/machine/*.conf -l
    -rw-rw-r-- 1 vmuser vmuser  155 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/cfa10036.conf
    -rw-rw-r-- 1 vmuser vmuser  199 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/cfa10037.conf
    -rw-rw-r-- 1 vmuser vmuser  234 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/cfa10049.conf
    -rw-rw-r-- 1 vmuser vmuser  234 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/cfa10055.conf
    -rw-rw-r-- 1 vmuser vmuser  229 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/cfa10056.conf
    -rw-rw-r-- 1 vmuser vmuser  255 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/cfa10057.conf
    -rw-rw-r-- 1 vmuser vmuser  255 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/cfa10058.conf
    -rw-rw-r-- 1 vmuser vmuser  466 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/cgtqmx6.conf
    -rw-rw-r-- 1 vmuser vmuser  246 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/imx233-olinuxino-maxi.conf
    -rw-rw-r-- 1 vmuser vmuser  190 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/imx233-olinuxino-micro.conf
    -rw-rw-r-- 1 vmuser vmuser  188 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/imx233-olinuxino-mini.conf
    -rw-rw-r-- 1 vmuser vmuser  508 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/imx6qsabrelite.conf
    -rw-rw-r-- 1 vmuser vmuser  726 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/m28evk.conf
    -rw-rw-r-- 1 vmuser vmuser  767 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/m53evk.conf
    -rw-rw-r-- 1 vmuser vmuser 1641 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/nitrogen6x.conf
    -rw-rw-r-- 1 vmuser vmuser  786 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/nitrogen6x-lite.conf
    -rw-rw-r-- 1 vmuser vmuser  538 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/wandboard-dual.conf
    -rw-rw-r-- 1 vmuser vmuser  529 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/wandboard-quad.conf
    -rw-rw-r-- 1 vmuser vmuser  465 Apr 16 23:58 ../sources/meta-fsl-arm-extra/conf/machine/wandboard-solo.conf

//list available images
$ find ../sources -name *image*
    ../sources/meta-fsl-arm/scripts/lib/image
    ../sources/meta-fsl-arm/classes/mfgtool-initramfs-image.bbclass
    ../sources/meta-fsl-arm/classes/image_types_fsl.bbclass
    ../sources/meta-fsl-arm/recipes-fsl/images
    ../sources/meta-fsl-arm/recipes-fsl/images/fsl-image-mfgtool-initramfs.bb
    ../sources/poky/scripts/lib/image
    ../sources/poky/scripts/lib/image/canned-wks/sdimage-bootpart.wks
    ../sources/poky/scripts/lib/wic/plugins/imager
    ../sources/poky/scripts/lib/wic/plugins/source/fsimage.py
    ../sources/poky/scripts/lib/wic/imager
    ../sources/poky/scripts/lib/wic/imager/baseimager.py
    ../sources/poky/scripts/test-remote-image
    ../sources/poky/scripts/contrib/ddimage
    ../sources/poky/scripts/runqemu-addptable2image
    ../sources/poky/documentation/ref-manual/ref-images.xml
    ../sources/poky/documentation/ref-manual/figures/image-generation.png
    ../sources/poky/documentation/ref-manual/figures/images.png
    ../sources/poky/documentation/mega-manual/figures/image-generation.png
    ../sources/poky/documentation/mega-manual/figures/images.png
    ../sources/poky/documentation/mega-manual/figures/using-a-pre-built-image.png
    ../sources/poky/documentation/mega-manual/figures/building-an-image.png
    ../sources/poky/documentation/yocto-project-qs/figures/using-a-pre-built-image.png
    ../sources/poky/documentation/yocto-project-qs/figures/building-an-image.png
    ../sources/poky/bitbake/bin/image-writer
    ../sources/poky/bitbake/lib/toaster/orm/migrations/0005_auto__add_target_image_file__add_target_file__add_field_variablehistor.py
    ../sources/poky/bitbake/lib/toaster/orm/migrations/0006_auto__add_field_target_image_size__add_field_target_license_manifest_p.py
    ../sources/poky/bitbake/lib/toaster/toastergui/static/css/images
    ../sources/poky/bitbake/lib/bb/ui/icons/images
    ../sources/poky/bitbake/lib/bb/ui/icons/images/images_hover.png
    ../sources/poky/bitbake/lib/bb/ui/icons/images/images_display.png
    ../sources/poky/bitbake/lib/bb/ui/crumbs/imagedetailspage.py
    ../sources/poky/bitbake/lib/bb/ui/crumbs/imageconfigurationpage.py
    ../sources/poky/bitbake/lib/bb/ui/crumbs/hig/saveimagedialog.py
    ../sources/poky/bitbake/lib/bb/ui/crumbs/hig/retrieveimagedialog.py
    ../sources/poky/bitbake/lib/bb/ui/crumbs/hig/imageselectiondialog.py
    ../sources/poky/bitbake/lib/bb/ui/crumbs/hig/deployimagedialog.py
    ../sources/poky/meta-selftest/recipes-test/images
    ../sources/poky/meta-selftest/recipes-test/images/oe-selftest-image.bb
    ../sources/poky/meta/recipes-extended/images
    ../sources/poky/meta/recipes-extended/images/core-image-lsb-sdk.bb
    ../sources/poky/meta/recipes-extended/images/core-image-full-cmdline.bb
    ../sources/poky/meta/recipes-extended/images/core-image-kernel-dev.bb
    ../sources/poky/meta/recipes-extended/images/core-image-lsb.bb
    ../sources/poky/meta/recipes-extended/images/core-image-testmaster.bb
    ../sources/poky/meta/recipes-extended/images/core-image-lsb-dev.bb
    ../sources/poky/meta/recipes-extended/images/core-image-testmaster-initramfs.bb
    ../sources/poky/meta/recipes-multimedia/gstreamer/gst-ffmpeg-0.10.13/0001-avcodec-msrle-use-av_image_get_linesize-to-calculate.patch
    ../sources/poky/meta/recipes-qt/images
    ../sources/poky/meta/recipes-qt/images/qt4e-demo-image.bb
    ../sources/poky/meta/recipes-qt/qt4/qt4-4.8.6/0028-Don-t-crash-on-broken-GIF-images.patch
    ../sources/poky/meta/recipes-graphics/xorg-lib/xcb-util-image_0.4.0.bb
    ../sources/poky/meta/recipes-graphics/images
    ../sources/poky/meta/recipes-graphics/images/core-image-x11.bb
    ../sources/poky/meta/recipes-graphics/images/core-image-directfb.bb
    ../sources/poky/meta/recipes-graphics/images/core-image-weston.bb
    ../sources/poky/meta/recipes-graphics/images/core-image-clutter.bb
    ../sources/poky/meta/recipes-devtools/mkelfimage
    ../sources/poky/meta/recipes-devtools/mkelfimage/mkelfimage
    ../sources/poky/meta/recipes-devtools/mkelfimage/mkelfimage_git.bb
    ../sources/poky/meta/recipes-core/images
    ../sources/poky/meta/recipes-core/images/core-image-minimal.bb
    ../sources/poky/meta/recipes-core/images/core-image-base.bb
    ../sources/poky/meta/recipes-core/images/build-appliance-image_12.0.1.bb
    ../sources/poky/meta/recipes-core/images/build-appliance-image
    ../sources/poky/meta/recipes-core/images/core-image-minimal-mtdutils.bb
    ../sources/poky/meta/recipes-core/images/core-image-minimal-dev.bb
    ../sources/poky/meta/recipes-core/images/core-image-minimal-initramfs.bb
    ../sources/poky/meta/classes/image-buildinfo.bbclass
    ../sources/poky/meta/classes/testimage-auto.bbclass
    ../sources/poky/meta/classes/testimage.bbclass
    ../sources/poky/meta/classes/image_types_uboot.bbclass
    ../sources/poky/meta/classes/image-vmdk.bbclass
    ../sources/poky/meta/classes/core-image.bbclass
    ../sources/poky/meta/classes/image.bbclass
    ../sources/poky/meta/classes/image_types.bbclass
    ../sources/poky/meta/classes/image-prelink.bbclass
    ../sources/poky/meta/classes/image-swab.bbclass
    ../sources/poky/meta/classes/image-live.bbclass
    ../sources/poky/meta/classes/image-mklibs.bbclass
    ../sources/poky/meta/lib/oe/image.py
    ../sources/poky/meta/lib/oeqa/controllers/masterimage.py
    ../sources/poky/meta/recipes-bsp/u-boot/u-boot-mkimage_2015.01.bb
    ../sources/poky/meta/recipes-rt/images
    ../sources/poky/meta/recipes-rt/images/core-image-rt.bb
    ../sources/poky/meta/recipes-rt/images/core-image-rt-sdk.bb
    ../sources/poky/meta/recipes-connectivity/connman/connman-gnome/images
    ../sources/poky/meta/recipes-sato/images
    ../sources/poky/meta/recipes-sato/images/core-image-sato.bb
    ../sources/poky/meta/recipes-sato/images/core-image-sato-dev.bb
    ../sources/poky/meta/recipes-sato/images/core-image-sato-sdk.bb
    ../sources/poky/meta-skeleton/recipes-multilib/images
    ../sources/poky/meta-skeleton/recipes-multilib/images/core-image-multilib-example.bb
    ../sources/meta-openembedded/meta-oe/recipes-multimedia/libsdl-image
    ../sources/meta-openembedded/meta-oe/recipes-multimedia/libsdl-image/libsdl-image
    ../sources/meta-openembedded/meta-oe/recipes-multimedia/libsdl-image/libsdl-image_1.2.12.bb
    ../sources/meta-openembedded/meta-oe/recipes-graphics/lxdm/lxdm/0001-lxdm.conf.in-blacklist-root-for-release-images.patch
    ../sources/meta-openembedded/meta-oe/recipes-graphics/nonworking/slim/slim/0002-Fix-image-handling-integer-overflows.patch
    ../sources/meta-openembedded/meta-oe/recipes-support/imagemagick
    ../sources/meta-openembedded/meta-oe/recipes-support/imagemagick/imagemagick_6.8.9.bb
    ../sources/meta-openembedded/meta-initramfs/recipes-bsp/images
    ../sources/meta-openembedded/meta-initramfs/recipes-bsp/images/initramfs-kexecboot-klibc-image.bb
    ../sources/meta-openembedded/meta-initramfs/recipes-bsp/images/initramfs-debug-image.bb
    ../sources/meta-openembedded/meta-initramfs/recipes-bsp/images/initramfs-kexecboot-image.bb
    ../sources/Documentation/release-notes/source/images.inc
    ../sources/Documentation/user-guide/source/images.rst
    ../sources/Documentation/user-guide/source/image-list.inc
    ../sources/meta-fsl-demos/recipes-qt/images
    ../sources/meta-fsl-demos/recipes-qt/images/qt-in-use-image.bb
    ../sources/meta-fsl-demos/recipes-qt/images/qte-in-use-image.bb
    ../sources/meta-fsl-demos/recipes-fsl/images
    ../sources/meta-fsl-demos/recipes-fsl/images/fsl-image-machine-test.bb
    ../sources/meta-fsl-demos/recipes-fsl/images/fsl-image-multimedia-full.bb
    ../sources/meta-fsl-demos/recipes-fsl/images/fsl-image-multimedia.bb
</code></pre>

<h3>4.4.3   Start to build</h3>

<pre><code>//list core-image-base all task 
$ bitbake -c listtasks core-image-base

// download all source only 
$ bitbake -c fetchall core-image-base

//build
$ bitbake core-image-base
</code></pre>

<h1>5.      Build image for imx6 using ltib</h1>

<h2>5.1     Get imx6 bsp source from fresscale sit</h2>

<pre><code>Version: L3.0.35_4.1.0_130816_source.gz
$ cd ~/ltib_src
$ tar xvf L3.0.35_4.1.0_130816_source.gz
</code></pre>

<h2>5.2     Add user super privilege to visudo</h2>

<pre><code>$sudo /usr/sbin/visudo

#add below line for vmuser account super privilege
vmuser ALL = NOPASSWD: /usr/bin/rpm, /opt/freescale/ltib/usr/bin/rpm
</code></pre>

<h2>5.3     Install LTIB</h2>

<pre><code>$ cd ~/ltib_src
$ ./L3.0.35_4.1.0_130816_source/install

......
Installation complete, your ltib installation has been placed in 
/home/vmuser/ltib_src/ltib, to complete the installation:

cd /home/vmuser/ltib_src/ltib
./ltib
</code></pre>

<h2>5.4     Apply ltib ubuntu patch</h2>

<h3>5.4.1   Add librt.so link</h3>

<pre><code>$ sudo ln -s /usr/lib/x86_64-linux-gnu/librt.so   /usr/lib/librt.so
</code></pre>

<h3>5.4.2   Apply 0001_make_L3.0.35_4.1.0_compile_on_Ubuntu_14.04_64bit_OS.patch</h3>

<pre><code>$ cd /home/vmuser/ltib_src/ltib
$ wget https://community.freescale.com/servlet/JiveServlet/download/100725-3-274381/0001_make_L3.0.35_4.1.0_compile_on_Ubuntu_14.04_64bit_OS.patch.zip
$ unzip 0001_make_L3.0.35_4.1.0_compile_on_Ubuntu_14.04_64bit_OS.patch.zip
$ git apply 0001_make_L3.0.35_4.1.0_compile_on_Ubuntu_14.04_64bit_OS.patch
</code></pre>

<h2>5.5     Fist build LTIB for imx6q-sdb</h2>

<pre><code>$ cd /home/vmuser/ltib_src/ltib

$ ./ltib -m config

Platform choice (Freescale iMX reference boards)  ---&gt;


Choose the platform type
Selection (imx6q)  ---&gt;


Choose the packages profile
Selection (use packages in preconfig (Min profile))  ---&gt;


(imx6q) Platform
--- LTIB settings
     System features  ---&gt;
--- Choose the target C library type
    Target C library type (glibc)  ---&gt;
    C library package (from toolchain only)  ---&gt;
    Toolchain component options  ---&gt;
--- Toolchain selection.
    Toolchain (ARM, gcc-4.6.2, multilib, neon optimized, gnueabi/eglibc2.13)  ---&gt;
(-O2 -march=armv7-a -mfpu=vfpv3 -mfloat-abi=softfp) Enter any CFLAGS for gcc/g++ (NEW)
--- Choose your bootloader for U-Boot
    bootloader (u-boot)  ---&gt;
    u-boot version (u-boot v2009.08)  ---&gt;
--- Choose your board for u-boot
    board (mx6q_sabresd)  ---&gt;
--- Choose your Kernel
    kernel (Linux 3.0.35-imx)  ---&gt;
[ ] Always rebuild the kernel
[ ] Produce cscope index
--- Include kernel headers
[*] Configure the kernel

...

--- Package selection 
    Package list  ---&gt;
--- Target System Configuration
    Options  ---&gt;
--- Target Image Generation
    Options  ---&gt;
---
Load an Alternate Configuration File
Save Configuration to an Alternate File


--- Platform specific package selection

[*] gpu-viv-bin-mx6q

[*] dbus

[*] expat

[*] libjpeg

[*] libpng


$ ./ltib

$ config kernel 

Device Driver ---&gt;
MXC support drivers ---&gt;
        MXC Vivante GPU Support ---&gt;
    &lt;*&gt; MXC vivante GPU support
</code></pre>

<h2>5.6     Build IMX6 GPU SDK</h2>

<pre><code>$ tar -xzvf gpu_sdk_v1.00.tar.gz -C ./gpu_sdk_v1.00
$ cd gpu_sdk_v1.00
</code></pre>

<h3>5.6.1   Build DevIL lib</h3>

<pre><code>$ cd gpu_sdk_v1.00
$ cp Demos/MultiAPI/GIFT/resources/required_libs/DevIL/DevIL-1.7.8.tar.gz  /opt/freescale/pkgs/
$ cp Demos/MultiAPI/GIFT/resources/required_libs/DevIL/DevIL-1.7.8.tar.gz.md5  /opt/freescale/pkgs/
$ mkdir /home/vmuser/ltib_src/ltib/dist/lfs-5.1/devil
$ cp Demos/MultiAPI/GIFT/resources/required_libs/DevIL/DevIL-1.7.8.spec /home/vmuser/ltib_src/ltib/dist/lfs-5.1/devil/
$ 
$ cd /home/vmuser/ltib_src/ltib/
$ dos2unix dist/lfs-5.1/devil/DevIL-1.7.8.spec
$ ./ltib -m prep -p DevIL-1.7.8.spec
$ ./ltib -m scbuild -p DevIL-1.7.8.spec
$ ./ltib -m scdeploy -p DevIL-1.7.8.spec
</code></pre>

<h3>5.6.2   Build assimp-2.0.863-sdk</h3>

<pre><code>$ cd /home/vmuser/project/gpu_sdk/gpu_sdk_v1.00/Demos/MultiAPI/GIFT/resources/required_libs/assimp-2.0.863
$ tar -xzvf assimp-2.0.863-sdk.tar.gz -C ./assimp-2.0.863-sdk
$ cd assimp-2.0.863-sdk
$ cd imx6
$ edit imx6_toolchain as below

# this one is important
SET(CMAKE_SYSTEM_NAME Linux)
#this one not so much
SET(CMAKE_SYSTEM_VERSION 1)

# specify the cross compiler
SET(CMAKE_C_COMPILER   /opt/freescale/usr/local/gcc-4.6.2-glibc-2.13-linaro-multilib-2011.12/fsl-linaro-toolchain/bin/arm-fsl-linux-gnueabi-gcc)
SET(CMAKE_CXX_COMPILER /opt/freescale/usr/local/gcc-4.6.2-glibc-2.13-linaro-multilib-2011.12/fsl-linaro-toolchain/bin/arm-fsl-linux-gnueabi-g++)

# where is the target environment 
SET(CMAKE_FIND_ROOT_PATH  /home/vmuser/ltib_src/ltib/rootfs)

# search for programs in the build host directories
SET(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
# for libraries and headers in the target directories
SET(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
SET(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)

$ cmake -DCMAKE_TOOLCHAIN_FILE=./imx6_toolchain -DENABLE_BOOST_WORKAROUND=ON ..
$ make


$ ls code/ -alh
total 9.9M
drwxrwxr-x 3 vmuser vmuser 4.0K Apr 20 19:24 .
drwxr-xr-x 5 vmuser vmuser 4.0K Apr 20 18:50 ..
drwxrwxr-x 3 vmuser vmuser 4.0K Apr 20 18:50 CMakeFiles
-rw-rw-r-- 1 vmuser vmuser  12K Apr 20 18:50 cmake_install.cmake
lrwxrwxrwx 1 vmuser vmuser   14 Apr 20 19:24 libassimp.so -&gt; libassimp.so.2
lrwxrwxrwx 1 vmuser vmuser   18 Apr 20 19:24 libassimp.so.2 -&gt; libassimp.so.2.0.0
-rwxrwxr-x 1 vmuser vmuser 9.7M Apr 20 19:24 libassimp.so.2.0.0
-rw-rw-r-- 1 vmuser vmuser 143K Apr 20 18:50 Makefile

$ ls ../include/ -alh
total 440K
drwxr-xr-x  3 vmuser vmuser 4.0K Apr 20 18:34 .
drwxrwxr-x 13 vmuser vmuser 4.0K Apr 20 18:34 ..
-rw-r--r--  1 vmuser vmuser  15K Nov 22  2010 aiAnim.h
-rw-r--r--  1 vmuser vmuser  701 Nov 22  2010 aiAssert.h
-rw-r--r--  1 vmuser vmuser 7.3K Nov 22  2010 aiCamera.h
-rw-r--r--  1 vmuser vmuser 3.5K Nov 22  2010 aiColor4D.h
-rw-r--r--  1 vmuser vmuser 6.9K Nov 22  2010 aiColor4D.inl
-rw-r--r--  1 vmuser vmuser  27K Nov 22  2010 aiConfig.h
-rw-r--r--  1 vmuser vmuser 9.8K Nov  2  2011 aiDefines.h
-rw-r--r--  1 vmuser vmuser 4.5K Nov 22  2010 aiFileIO.h
-rw-r--r--  1 vmuser vmuser 7.8K Nov 22  2010 aiLight.h
-rw-r--r--  1 vmuser vmuser  48K Nov 22  2010 aiMaterial.h
-rw-r--r--  1 vmuser vmuser 6.1K Nov 22  2010 aiMaterial.inl
-rw-r--r--  1 vmuser vmuser 5.7K Nov 22  2010 aiMatrix3x3.h
-rw-r--r--  1 vmuser vmuser 7.7K Nov 22  2010 aiMatrix3x3.inl
-rw-r--r--  1 vmuser vmuser 8.7K Nov 22  2010 aiMatrix4x4.h
-rw-r--r--  1 vmuser vmuser  15K Nov 22  2010 aiMatrix4x4.inl
-rw-r--r--  1 vmuser vmuser  24K Nov 22  2010 aiMesh.h
-rw-r--r--  1 vmuser vmuser  28K Nov 22  2010 aiPostProcess.h
-rw-r--r--  1 vmuser vmuser  11K Nov 22  2010 aiQuaternion.h
-rw-r--r--  1 vmuser vmuser  14K Nov 22  2010 aiScene.h
-rw-r--r--  1 vmuser vmuser 6.4K Nov 22  2010 aiTexture.h
-rw-r--r--  1 vmuser vmuser  15K Nov 22  2010 aiTypes.h
-rw-r--r--  1 vmuser vmuser 5.5K Nov 22  2010 aiVector2D.h
-rw-r--r--  1 vmuser vmuser 4.0K Nov 22  2010 aiVector3D.h
-rw-r--r--  1 vmuser vmuser 8.6K Nov 22  2010 aiVector3D.inl
-rw-r--r--  1 vmuser vmuser 4.1K Nov 22  2010 aiVersion.h
-rw-r--r--  1 vmuser vmuser  19K Nov 22  2010 assimp.h
-rw-r--r--  1 vmuser vmuser  27K Nov 22  2010 assimp.hpp
drwxr-xr-x  2 vmuser vmuser 4.0K Apr 20 18:34 Compiler
-rw-r--r--  1 vmuser vmuser 7.5K Nov 22  2010 DefaultLogger.h
-rw-r--r--  1 vmuser vmuser 4.8K Nov 22  2010 IOStream.h
-rw-r--r--  1 vmuser vmuser 8.0K Nov 22  2010 IOSystem.h
-rw-r--r--  1 vmuser vmuser 8.9K Nov 22  2010 Logger.h
-rw-r--r--  1 vmuser vmuser 3.8K Nov 22  2010 LogStream.h
-rw-r--r--  1 vmuser vmuser 3.3K Nov 22  2010 NullLogger.h
-rw-r--r--  1 vmuser vmuser 3.7K Nov 22  2010 ProgressHandler.h

$ copy *.so to  /home/vmuser/ltib_src/ltib/usr/lib

$ copy *.h to   /home/vmuser/ltib_src/ltib/usr/include/ASSIMP

$ ced /home/vmuser/ltib_src/ltib/usr/lib
$ sudo ln -s libassimp.so.2.0.0 libassimp.so.2
$ sudo ln -s libassimp.so.2 libassimp.so
$ ls libassimp.so* -alh
lrwxrwxrwx 1 root root   14 Apr 20 19:51 libassimp.so -&gt; libassimp.so.2
lrwxrwxrwx 1 root root   18 Apr 20 19:51 libassimp.so.2 -&gt; libassimp.so.2.0.0
-rwxr-xr-x 1 root root 9.7M Apr 20 19:49 libassimp.so.2.0.0
</code></pre>

<h3>5.6.3   Build GIFT</h3>

<pre><code>$ tar -xzvf GIFT_v4.tar.gz -C ./GIFT_v4
$ cd GIFT_v4

$ edit Makefile as below

#----------------- development environment here
#important so we know where the libraries are
LTIB_ROOTFS=/home/vmuser/ltib_src/ltib/rootfs
LTIB_SRC=/home/vmuser/ltib_src/ltib/rpm/BUILD/linux

#set CROSS_COMPILE as below
CROSS_COMPILE = /opt/freescale/usr/local/gcc-4.6.2-glibc-2.13-linaro-multilib-2011.12/fsl-linaro-toolchain/bin/arm-fsl-linux-gnueabi-

#extra headers
EXTRA_INC =  $(LTIB_SRC)/include

#system headers
FSL_PLATFORM_INC = $(LTIB_ROOTFS)/usr/include

#extra libraries
EXTRA_LIB = 

#system libraries
FSL_PLATFORM_LIB = $(LTIB_ROOTFS)/usr/lib

#random needed vars
ARCH = arm
CD = cd
DEL_FILE = rm -f
MKDIR = mkdir -p
RMDIR = rmdir
CC = $(CROSS_COMPILE)g++
AR = $(CROSS_COMPILE)ar
LD = $(CROSS_COMPILE)g++
CP = cp
MAKE = make

#CFLAGS = -DDEBUG -D_DEBUG -D_GNU_SOURCE -mfloat-abi=softfp -mfpu=neon -fPIC -O3 -fno-strict-aliasing -fno-optimize-sibling-calls -Wall -g

CFLAGS = -DLINUX -DEGL_API_FB -mfloat-abi=softfp -mfpu=vfpv3 -fPIC -fno-strict-aliasing -fno-optimize-sibling-calls -O2 -march=armv7-a -mapcs-frame -fPIC -Wall -W -Wno-unused-parameter

CFLAGS += -I$(FSL_PLATFORM_INC) -I$(EXTRA_INC)

LFLAGS = -Wl,--library-path=$(FSL_PLATFORM_LIB),-rpath-link=$(FSL_PLATFORM_LIB) -ldl

EGL_FLAGS = -lEGL

ES11_FLAGS = -lGLESv1_CM

ES20_FLAGS = -lGLESv2 

VG11_FLAGS = -lOpenVG

ASSIMP_FLAGS = -lassimp

DEVIL_FLAGS = -lIL

#-----------------for each app here

APPNAME         = gift
DESTDIR         = ./bin
SRCDIR          = .

#LFLAGS                  += $(EGL_FLAGS) $(ES20_FLAGS) -lm
LFLAGS          += $(EGL_FLAGS) $(ES20_FLAGS) $(ASSIMP_FLAGS) $(DEVIL_FLAGS) -lm

OBJECTS         = GIFT.o obj3d.o TouchScreen.o SceneManager.o fslutil.o

first: all

all: $(APPNAME)

.PHONY: all

$(APPNAME): $(OBJECTS) 
    -@$(MKDIR) $(DESTDIR)
    $(LD) $(LFLAGS) -o $(DESTDIR)/$(APPNAME) $(OBJECTS)

%.o : %.cpp
    $(CC) $(CFLAGS) -c $&lt; -o $@

clean:
    $(DEL_FILE) $(OBJECTS) $(UTILOBJS)
    $(DEL_FILE) *~ core *.core

distclean: clean
    $(DEL_FILE) $(DESTDIR)/$(APPNAME)
    -@$(RMDIR) $(DESTDIR)


$ edit fslutil.c as below

...
#include &lt;EGL/egl.h&gt;
#include "fslutil.h" //#include &lt;fslutil.h&gt;
#include &lt;IL/il.h&gt;
...

$ make clean
$ make
$ ls bin/ -alh
total 60K
drwxrwxr-x 2 vmuser vmuser 4.0K Apr 20 20:16 .
drwxrwxr-x 4 vmuser vmuser 4.0K Apr 20 20:16 ..
-rwxrwxr-x 1 vmuser vmuser  52K Apr 20 20:16 gift
</code></pre>

<h1>6   Build image for imx6 using buildroot</h1>

<h2>6.1 Get buildroot source code</h2>

<pre><code>$ git clone http://git.buildroot.net/git/buildroot.git buildroot.git
$ cd buildroot.git
</code></pre>

<h2>6.2 Build using freescale_imx6qsabresd_defconfig default config</h2>

<pre><code>$ cd buildroot.git
$ make freescale_imx6qsabresd_defconfig
$ make
</code></pre>

<h2>6.3 Using eglibc</h2>

<pre><code>$ make menuconfig

    Toolchain type (Buildroot toolchain)  ---&gt;
    (buildroot) custom toolchain vendor name

    *** Kernel Header Options ***
    Kernel Headers (Manually specified Linux version)  ---&gt;
    (3.10.17) linux version
    Custom kernel headers series (3.10.x)  ---&gt;

    C library (eglibc)  ---&gt;
    eglibc version (2.18-svnr23787)  ---&gt; 

    ......

$ make
</code></pre>

<h2>6.4 Change device node management to static</h2>

<pre><code>$ cd buildroot.git
$ add system/device_table_imx6.txt as below
    # See package/makedevs/README for details
    #
    # This device table is used to assign proper ownership and permissions
    # on various files. It doesn't create any device file, as it is used
    # in both static device configurations (where /dev/ is static) and in
    # dynamic configurations (where devtmpfs, mdev or udev are used).
    #
    # &lt;name&gt;                        &lt;type&gt;  &lt;mode&gt;  &lt;uid&gt;   &lt;gid&gt;   &lt;major&gt; &lt;minor&gt; &lt;start&gt; &lt;inc&gt;   &lt;count&gt;
    /dev                            d       755     0       0       -       -       -       -       -
    /tmp                            d       1777    0       0       -       -       -       -       -
    /etc                            d       755     0       0       -       -       -       -       -
    /root                           d       700     0       0       -       -       -       -       -
    #/var/www                       d       755     33      33      -       -       -       -       -
    /etc/random-seed                f       600     0       0       -       -       -       -       -
    /etc/shadow                     f       600     0       0       -       -       -       -       -
    /etc/passwd                     f       644     0       0       -       -       -       -       -
    #/etc/network/if-up.d           d       755     0       0       -       -       -       -       -
    #/etc/network/if-pre-up.d       d       755     0       0       -       -       -       -       -
    #/etc/network/if-post-up.d      d       755     0       0       -       -       -       -       -
    #/etc/network/if-down.d         d       755     0       0       -       -       -       -       -
    #/etc/network/if-pre-down.d     d       755     0       0       -       -       -       -       -
    #/etc/network/if-post-down.d        d       755     0       0       -       -       -       -       -

    # uncomment this to allow starting x as non-root
    #/usr/X11R6/bin/Xfbdev          f       4755    0       0       -       -       -       -       -

$ add system/device_table_dev_imx6.txt as below
    # See package/makedevs/README for details
    #
    # This device table is used only to create device files when a static
    # device configuration is used (entries in /dev are static).
    #
    # &lt;name&gt;            &lt;type&gt;  &lt;mode&gt;  &lt;uid&gt;   &lt;gid&gt;   &lt;major&gt; &lt;minor&gt; &lt;start&gt; &lt;inc&gt;   &lt;count&gt;

    # Normal system devices
    /dev/null           c       666     0       0       1       3       0       0       -
    /dev/console        c       666     0       0       5       1       -       -       -
    /dev/ttymxc         c       666     0       0       207     16      0       1       4

$ make menuconfig

    (buildroot) System hostname
    (Welcome to Buildroot) System banner
        Passwords encoding (md5)  ---&gt;
        Init system (BusyBox)  ---&gt;
        /dev management (Static using device table)  ---&gt;
    (system/device_table_imx6.txt) Path to the permission tables
    (system/device_table_dev_imx6.txt) Path to the device tables
        Root FS skeleton (default target skeleton)  ---&gt;

    ......

$ make  
</code></pre>

<h2>6.5 Remove login prompt</h2>

<pre><code>//todo it seems not work correctly
$ cd buildroot.git
$ make menuconfig

    ......

    [ ] Run a getty (login prompt) after boot

    ......

$ make

//try this method
$ cd buildroot.git
$ make busybox-menuconfig

    ......

    [*] getty
    [ ] login                                                                                                                      
    [ ] Run logged in session in a child process

    ......

$ make
</code></pre>

<h2>6.6 Add gpu driver</h2>

<pre><code>$ cd buildroot.git
$ make menuconfig

    Target packages  ---&gt;

        Hardware handling  ---&gt;

            [*] Freescale i.MX libraries  ---&gt;

    --- Freescale i.MX libraries                                                                                            
    i.MX platform (imx6q)  ---&gt;                                                                                     
    *** imx-lib needs an imx-specific Linux kernel to be built ***                                                      
    *** imx-vpu needs an imx-specific Linux kernel to be built ***
    [ ]   firmware-imx (NEW)
    [*]   gpu-viv-bin-mx6q                                                                                                
    [*]     install examples 
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[build openwrt firmware]]></title>
    <link href="http://jordonwu.github.io/blog/2015/04/15/build-openwrt-firmware/"/>
    <updated>2015-04-15T14:51:54+08:00</updated>
    <id>http://jordonwu.github.io/blog/2015/04/15/build-openwrt-firmware</id>
    <content type="html"><![CDATA[<h1>1. Hardware</h1>

<p>wrtnode board <a href="http://cn.wrtnode.com/">http://cn.wrtnode.com/</a></p>

<h1>2. Backup firmware</h1>

<h2>1) ssh to wrtnode board</h2>

<pre><code>root@OpenWrt:/tmp# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00030000 00010000 "u-boot"
mtd1: 00010000 00010000 "u-boot-env"
mtd2: 00010000 00010000 "factory"
mtd3: 00fb0000 00010000 "firmware"
mtd4: 00e96447 00010000 "rootfs"
mtd5: 00780000 00010000 "rootfs_data"
</code></pre>

<h2>2) back up u-boot and factory partition to /tmp</h2>

<pre><code>root@OpenWrt:/tmp# dd if=/dev/mtd0 of=/tmp/wrtnode_u-boot.backup
root@OpenWrt:/tmp# dd if=/dev/mtd1 of=/tmp/wrtnode_u-boot-env.backup
root@OpenWrt:/tmp# dd if=/dev/mtd2 of=/tmp/wrtnode_factory.backup
root@OpenWrt:/tmp# cat /proc/mtd &gt; wrtnode_mtd_info.txt
</code></pre>

<h2>3) scp backup firmware to local pc</h2>

<pre><code>$ scp root@192.168.8.1:/tmp/wrtnode_u-boot.backup .
$ scp root@192.168.8.1:/tmp/wrtnode_u-boot-env.backup .
$ scp root@192.168.8.1:/tmp/wrtnode_factory.backup .
$ scp root@192.168.8.1:/tmp/wrtnode_mtd_info.txt .
</code></pre>

<h1>3. Build u-boot</h1>

<h1>4. Build kernel</h1>

<h1>5. Build openwrt image</h1>
]]></content>
  </entry>
  
</feed>
